<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>عيادة الشامي - احجز موعدك الآن بسهولة</title>
  <meta name="description" content="عيادة الشامي: رعاية طبية متكاملة مع نخبة من الأطباء. احجز موعدك الآن عبر الإنترنت بسهولة وأمان.">
  <meta name="keywords" content="عيادة, حجز موعد, طبيب, عيادة الشامي, القاهرة, جراحة, نساء وتوليد, باطنية">
  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  
  <style>
    body { font-family: 'Tajawal', sans-serif; background-color: #f8f9fa; }
    .hero { background: linear-gradient(135deg, #0d6efd, #00c6ff); color: white; text-align: center; padding: 60px 20px; border-radius: 0 0 20px 20px; }
    .doctor-card { transition: transform .3s ease, box-shadow .3s ease; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-radius: 16px; overflow: hidden; }
    .doctor-card:hover { transform: translateY(-5px); box-shadow: 0 8px 16px rgba(0,0,0,0.12); }
    .doctor-card img { height: 300px; object-fit: cover; }
    .form-container { background: white; border-radius: 16px; padding: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    .contact-section { background: white; }
    .contact-info-card { padding: 30px; background-color: #f8f9fa; border-radius: 16px; height: 100%; }
    .contact-info-item { display: flex; align-items: center; margin-bottom: 20px; font-size: 1.1rem; }
    .contact-info-item i { font-size: 1.5rem; color: #007bff; width: 40px; }
    .social-icons a { font-size: 1.8rem; margin-left: 20px; color: #343a40; transition: color 0.3s; }
    .social-icons a:hover { color: #007bff; }
    .footer { background-color: #212529; color: white; text-align: center; padding: 20px; margin-top: 40px; }
    .btn-primary:disabled { background-color: #6c757d; }
  </style>
</head>
<body>
  <section class="hero">
    <h1>احجز موعدك في عيادة الشامي</h1>
    <p class="lead">رعاية طبية بخبرة وثقة</p>
    <a href="#booking" class="btn btn-light mt-3">احجز الآن</a>
  </section>

  <section class="container my-5" id="doctors">
    <div class="text-center mb-5">
      <h2>أطباؤنا</h2>
      <p>نخبة من الأطباء المتخصصين لخدمتك</p>
    </div>
    <div class="row g-4 justify-content-center">
      <div class="col-lg-4 col-md-6">
        <div class="card doctor-card">
          <img loading="lazy" src="images/dr_ahmed.png" class="card-img-top" alt="دكتور أحمد">
          <div class="card-body text-center">
            <h5 class="fw-bold">د. أحمد</h5>
            <p class="text-muted">أخصائي جراحة عامة</p>
          </div>
        </div>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="card doctor-card">
          <img loading="lazy" src="images/dr_sara.png" class="card-img-top" alt="دكتورة سارة">
          <div class="card-body text-center">
            <h5 class="fw-bold">د. سارة</h5>
            <p class="text-muted">أخصائية نساء وتوليد</p>
          </div>
        </div>
      </div>
      <div class="col-lg-4 col-md-6">
        <div class="card doctor-card">
          <img loading="lazy" src="images/dr_noha.png" class="card-img-top" alt="دكتورة نهى">
          <div class="card-body text-center">
            <h5 class="fw-bold">د. نهى</h5>
            <p class="text-muted">أخصائية باطنية وقلب</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="booking" class="container my-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="form-container">
          <h2 class="text-center mb-4">نموذج الحجز</h2>
          <form id="bookingForm" novalidate>
            <div class="mb-3">
              <label class="form-label">الاسم الكامل</label>
              <input type="text" class="form-control" id="patientName" required>
            </div>
            <div class="mb-3">
              <label class="form-label">رقم الهاتف (واتساب)</label>
              <input type="tel" class="form-control" id="patientPhone" required>
            </div>
            <div class="mb-3">
              <label class="form-label">اختر الطبيب</label>
              <select id="doctor" class="form-select" required>
                <option value="" selected disabled>-- اختر الطبيب --</option>
                <option value="Dr. Ahmed">د. أحمد - جراحة عامة</option>
                <option value="Dr. Sara">د. سارة - نساء وتوليد</option>
                <option value="Dr. Noha">د. نهى - باطنية وقلب</option>
              </select>
            </div>
            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label">التاريخ</label>
                <input type="date" class="form-control" id="date" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">الوقت</label>
                <select id="time" class="form-select" required>
                  <option value="" selected disabled>-- اختر الوقت --</option>
                </select>
                <div class="form-text">مواعيد العمل من 9ص حتى 9م</div>
              </div>
            </div>
            <div id="messageArea" class="mt-4"></div>
            <button type="submit" class="btn btn-primary w-100 mt-3" id="submitButton">
              تأكيد الحجز
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <section class="contact-section py-5">
    <div class="container">
      <div class="text-center mb-5">
        <h2>تواصل معنا</h2>
        <p>نحن هنا لمساعدتك. تفضل بزيارتنا أو تواصل معنا.</p>
      </div>
      <div class="row g-4 align-items-center">
        <div class="col-lg-6">
          <div class="contact-info-card">
            <div class="contact-info-item">
              <i class="fas fa-map-marker-alt"></i>
              <span>برج النصر, 446 ش فيصل، القاهرة، مصر</span>
            </div>
            <div class="contact-info-item">
              <i class="fas fa-phone"></i>
              <a href="tel:+201006404614" class="text-decoration-none text-dark">01006404614</a>
            </div>
            <div class="contact-info-item">
              <i class="fas fa-envelope"></i>
              <a href="mailto:info@shamy-clinic.com" class="text-decoration-none text-dark">shamymedia@gmail.com</a>
            </div>
            <hr class="my-4">
            <h5 class="mb-3">تابعنا على:</h5>
            <div class="social-icons">
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="https://wa.me/201006404614"><i class="fab fa-whatsapp"></i></a>
              <a href="#"><i class="fab fa-facebook"></i></a>
            </div>
        </div>
        </div>
        <div class="col-lg-6">
          <div class="ratio ratio-16x9" style="border-radius: 16px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4053.110004188214!2d31.195507575552554!3d30.013462674939177!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x145846edbfabd573%3A0xf1694f2f21218509!2sDr.%20Abdelaziz%20Moussa%20-%20Alshomoukh%20Dentistry!5e1!3m2!1sen!2seg!4v1762983722731!5m2!1sen!2seg" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <p>© 2025 عيادة الشامي. تصميم وبرمجة شامي ميديا.</p>
  </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const SECRET_KEY = 'my_super_secret_key_123';
    // ======== رابط السكريبت الخاص بك (لم يتغير) ========
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwKNn9SXM3bpEUQ1FBumwNP8bfA69JzP-gDWKDhm7SKIDbZseO8Gl5DBu1i9q9q5eUITg/exec';
    // ======== رقم الواتساب الخاص بك (لم يتغير) ========
    const CLINIC_WHATSAPP_NUMBER = '201006404614';

    const bookingForm = document.getElementById('bookingForm');
    const submitButton = document.getElementById('submitButton');
    const messageArea = document.getElementById('messageArea');
    const dateInput = document.getElementById('date');
    const timeSelect = document.getElementById('time');

    function populateTimeSlots() {
      const openingHour = 9; const closingHour = 21; const interval = 15;
      timeSelect.innerHTML = '<option value="" selected disabled>-- اختر الوقت --</option>';
      for (let hour = openingHour; hour < closingHour; hour++) {
        for (let minute = 0; minute < 60; minute += interval) {
          const formattedHour = hour.toString().padStart(2, '0');
          const formattedMinute = minute.toString().padStart(2, '0');
          const timeValue = `${formattedHour}:${formattedMinute}`;
          const option = document.createElement('option');
          option.value = timeValue;
          option.textContent = timeValue;
          timeSelect.appendChild(option);
        }
      }
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      dateInput.min = new Date().toISOString().split('T')[0];
      populateTimeSlots();
    });

    bookingForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        if (!bookingForm.checkValidity()) {
            event.stopPropagation();
            bookingForm.classList.add('was-validated');
            return;
        }

        submitButton.disabled = true;
        submitButton.innerHTML = `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> جارٍ التأكيد...`;
        
        const formData = {
            patientName: document.getElementById('patientName').value.trim(),
            patientPhone: document.getElementById('patientPhone').value.trim(),
            doctor: document.getElementById('doctor').value,
            date: dateInput.value,
            time: timeSelect.value,
            secretKey: SECRET_KEY
        };

        try {
           const response = await fetch(WEB_APP_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'text/plain;charset=utf-8' }, 
    body: JSON.stringify(formData)
});
            const result = await response.json();
            if (result.status === 'success') {
                handleSuccess(formData);
            } else {
                handleError(result.message || 'حدث خطأ غير متوقع.');
            }
        } catch (error) {
            console.error('Fetch Error:', error);
            handleError('حدث خطأ في الاتصال. يرجى التحقق من الشبكة والمحاولة مرة أخرى.');
        } finally {
            submitButton.disabled = false;
            submitButton.innerHTML = 'تأكيد الحجز';
        }
    });

    function handleSuccess(formData) {
    // 1. عرض رسالة نجاح واضحة
    showMessage('تم تأكيد حجزك بنجاح! سيتم الآن فتح واتساب لمتابعة التفاصيل.', 'success');
    
    // 2. تكوين وفتح رابط واتساب (التعديل هنا: تم إزالة setTimeout لضمان عدم الحظر)
    const doctorSelect = document.getElementById('doctor');
    const doctorText = doctorSelect.options[doctorSelect.selectedIndex].text;
    
    const whatsappMessage = `مرحباً عيادة الشامي،\nلقد قمت بتأكيد حجز موعد باسم: ${formData.patientName}\nمع: ${doctorText}\nفي تاريخ: ${formData.date} الساعة: ${formData.time}.\nشكراً لكم.`;
    
    // فتح الرابط فوراً
    const whatsappURL = `https://wa.me/${CLINIC_WHATSAPP_NUMBER}?text=${encodeURIComponent(whatsappMessage)}`;
    window.open(whatsappURL, '_blank');
    
    // 3. إعادة تعيين النموذج
    bookingForm.reset();
    bookingForm.classList.remove('was-validated');
    dateInput.min = new Date().toISOString().split('T')[0];
    if (typeof populateTimeSlots === 'function') {
        populateTimeSlots();
    }
   }

    function showMessage(message, type) {
        const alertType = type === 'success' ? 'alert-success' : 'alert-danger';
        messageArea.innerHTML = `<div class="alert ${alertType} alert-dismissible fade show" role="alert">
                                    ${message}
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                  </div>`;
    }
  </script>
</body>
</html>
